<html>
  <title>vr1</title>
  <head>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N085VGW7DR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N085VGW7DR');
</script>
    
    
    <!--    Place the script for aframe here     -->
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe.min.js"></script>
    <!-- Link Clicking -->
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe-href-component.min.js"></script>
    <!--     Place the script for aframe extras here -->
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe-extras.js"></script>
    <script src="movement-controls.js"></script>
    <!--     Place the script for the environment component here -->
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe-environment-component.min.js"></script>

    <!--     Place the script for the particle system component here -->
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe-particle-system-component.min.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//aframe-event-set-component.min.js"></script>


    
    
    <!--IMPORT ANIMATION JS-->
     <script src="https://graffitiartprogramming.github.io/pivoting-puppets//random-animation.js"></script>
    
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-snake.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-aligator.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-dinosaur.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-dragonfly.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-crab.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//winter-puppet-1.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//winter-puppet-2.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//winter-puppet-3.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//winter-puppet-4.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-blueguy.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-orangeguy.js"></script>
    
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-ant.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-frog.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-fireguy.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-giraffe.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-peyton-carrot.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-peyton-flower.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-pritchard-frog.js"></script>
    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-pritchard-bat.js"></script>

    <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-bear.js"></script>
     <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-thwomp.js"></script>
     <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-fish.js"></script>
     <script src="https://graffitiartprogramming.github.io/pivoting-puppets//animate-horseshoecrab.js"></script>

    <!---VERTICAL PITCH touch controls--->
    <script>
      AFRAME.components["look-controls"].Component.prototype.onTouchMove =
        function (t) {
          var PI_2 = Math.PI / 2,
            e,
            o = this.el.sceneEl.canvas,
            i = this.yawObject,
            j = this.pitchObject;
          this.touchStarted &&
            this.data.touchEnabled &&
            ((e =
              (2 * Math.PI * (t.touches[0].pageX - this.touchStart.x)) /
              o.clientWidth),
            (f =
              (2 * Math.PI * (t.touches[0].pageY - this.touchStart.y)) /
              o.clientHeight),
            (j.rotation.x += 0.3 * f),
            (i.rotation.y += 0.5 * e),
            (j.rotation.x = Math.max(-PI_2, Math.min(PI_2, j.rotation.x))),
            (this.touchStart = {
              x: t.touches[0].pageX,
              y: t.touches[0].pageY,
            }));
        };
    </script>

    <!--IOS VIDEO COMPATABILITY-->
    <script>
      AFRAME.registerComponent("play-on-click", {
        init: function () {
          this.onClick = this.onClick.bind(this);
        },
        play: function () {
          window.addEventListener("click", this.onClick);
        },
        pause: function () {
          window.removeEventListener("click", this.onClick);
        },
        onClick: function (evt) {
          var videoEl = this.el.getAttribute("material").src;
          if (!videoEl) {
            return;
          }
          this.el.object3D.visible = true;
          videoEl.play();
        },
      });
    </script>

    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!---LINK TRAVERSAL-->
   
    
    
    
    
    
  </head>

  <body>
    
    <a-assets>
       <a-asset-item
          id="stage"
          src="https://graffitiartprogramming.github.io/pivoting-puppets/stage1.gltf?v=1693268043136"
        ></a-asset-item> 
    </a-assets>
    
    
    <a-scene
      fog="type:linear;
           color: black"
             vr-mode-ui="enabled: false"
    >
      
      
      
          <!---SKY-->
      
      <a-sky animation="property: rotation; to: 360 360 0; loop: NaN; easing: linear; dur: 590000" src="https://graffitiartprogramming.github.io/pivoting-puppets/starmap_4k.jpg?v=1693269878356" material="shader: ios10hls" geometry="" rotation="3.034372881355932 3.034372881355932 0">
</a-sky>
      <!-- Asset Management System-->

      

      <!--CAMERA-->
      
      <a-entity id="cameraRig" position="0 0 0">
      <a-entity
        rotation="0 0 0"
        id="pov"
        animation="property: position; startEvents: go"
      >
        <a-camera look-controls wasd-controls-enabled="true"
                   id="camera">
          <a-entity
            cursor="rayOrigin: mouse"
            raycaster="objects: #clickablePlane"
          >
          </a-entity>
        </a-camera>
      </a-entity>
      </a-entity>
      



      <!-- Scene -->
      <a-entity gltf-model="#stage" 
                shadow="cast: false; receive: false"
                rotation="0 0 0"
                >
      </a-entity>

      
      
      <a-circle
  id="clickablePlane"
  material="transparency: true; opacity: 0;"
  position="0 0.2 3.665" 
               rotation="-90 0 0"
  scale="1 0.8 1"
  geometry=""
  radius="9"
></a-circle>
 
      
      
      
      
      
    
    <!-- ARTWORKS -->
      
      <!---pritchard day-->

      <a-entity rotation="0 0 0" position="8 1 6"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-pritchard-bat
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      <a-entity rotation="0 0 0" position="6 1 6"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-pritchard-frog
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
    
            <a-entity rotation="0 0 0" position="4 1 6"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-peyton-carrot
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="2 1 10"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-peyton-flower
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="0 1 6"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-frog
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
            <a-entity rotation="0 0 0" position="-2 1 8"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-fireguy
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="-4 1 6"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-ant
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
          <a-entity rotation="0 0 0" position="-6 1 6"
                    look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-giraffe
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
     
      
      
      <!---DAY2-->

        <a-entity rotation="0 0 0" position="4 1 4"
                  look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            winter-puppet-1
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="2 1 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            winter-puppet-2
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="0 1 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            winter-puppet-3
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="-2 1 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            winter-puppet-4
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      <a-entity rotation="0 0 0" position="-4 1 4"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-orangeguy
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
            <a-entity rotation="0 0 0" position="-6 1 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-blueguy
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
      <a-entity rotation="0 0 0" position="-8 1 6"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="1.5"
            height="2"
            animate-bear
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
      <a-entity rotation="0 0 0" position="-8 1.6 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="1.5"
            height="3"
            animate-thwomp
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
        <a-entity rotation="0 0 0" position="8 1 2"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="1.5"
            height="1.5"
            animate-fish
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
        
      <a-entity rotation="0 0 0" position="8 1 4"
                      look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="1.5"
            height="1.5"
            animate-horseshoecrab
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      
      
       <!--DAY1-->

      
      <a-entity rotation="0 0 0" position="0 1 2"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="1.5"
            height="1.5"
            animate-snake
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>

      
      <a-entity rotation="0 0 0" position="-2 1 2"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-aligator
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      <a-entity rotation="0 0 0" position="-4 1 0"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-dinosaur
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      <a-entity rotation="0 0 0" position="2 1 1"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-dragonfly
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      
      <a-entity rotation="0 0 0" position="4 1 1"
                look-at-camera>
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2"
            height="1.5"
            animate-crab
                   material="alphaTest: 0.5; transparent: true;"
          ></a-image>
        </a-entity>
      

      

<!----STAGE-->
    
      <a-entity animation="property: position; 
                           dir: alternate;
                            from: 1 0 0;
                            to: -1 0 0; 
                           loop: true; 
                           dur: 6000;
                            easing: easeInOutCubic;
                           autoplay: true">
      <a-entity rotation="0 0 0" position="0 1.9 -5">
        <a-entity animation="property: position; 
                           dir: alternate;
                            from: 0.5 0 0;
                            to: -0.5 0 0; 
                           loop: true; 
                           dur: 6000;
                            easing: easeInOutCubic;
                           autoplay: true">
          <a-entity animation="property: rotation; 
                           dir: alternate;
                            from: 0 180 0;
                            to: 0 0 0; 
                           loop: true; 
                           dur: 1000;
                            easing: easeInOutCubic;
                           autoplay: true">
          <a-image
            position="0 0 0"
            rotation="0 0 0"
            width="2.5"
            height="2"
            animate-random
          ></a-image>
        </a-entity>
        </a-entity>
      </a-entity>
      </a-entity>
      
    

      
      

     



      


      <!--GOTO SCRIPT-->
<script>
var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

var canClick = true; // Set initial click state to true
var cooldownTime = 100; // Set cooldown time in milliseconds
var isMouseDown = false; // Set initial mouse state to false
var mouseUpEvent = new Event('mouseup'); // Create mouseup event
var clickTimeThreshold = isMobile ? 1000 : 1000; // Set the maximum time between mousedown and mouseup events to 1000 ms for touch events on mobile devices, and 0 ms for mouse click events on desktop devices.

document.getElementById('clickablePlane').addEventListener('mousedown', function (event) {
  if (event.target.getAttribute('class') === 'link') return; // Return if the clicked element has the class 'link'
  isMouseDown = true; // Set mouse state to true when clicked down
});

document.getElementById('clickablePlane').addEventListener('mouseup', function (event) {
  if (event.target.getAttribute('class') === 'link') return; // Return if the clicked element has the class 'link'
  if (isMouseDown && canClick) {
    var intersection = event.detail.intersection;
    var distance = intersection.distance;
    // Minimize accidental clicks by checking if the click was within a reasonable distance from the camera
    if (distance < 10) {
      var newPosition = intersection.point;
      newPosition.y = 1.6; // Adjust the camera height to your liking

      var prevClickTime = event.target.previousClickTime;
      if (prevClickTime) {
        var currentTime = Date.now();
        var deltaTime = currentTime - prevClickTime;
        if (deltaTime <= clickTimeThreshold) {
          document.querySelector('a-camera').setAttribute('animation', 'property: position; to: ' + newPosition.x + ' ' + newPosition.y + ' ' + newPosition.z + '; dur: 500');

          canClick = false; // Set click state to false
          setTimeout(function () {
            canClick = true; // Reset click state to true after cooldown
          }, cooldownTime);
        }
      }

      event.target.previousClickTime = Date.now(); // Store the current click time
    }
  }
  isMouseDown = false; // Reset mouse state to false on click up
});

document.getElementById('clickablePlane').addEventListener('mouseleave', function () {
  if (isMouseDown) {
    document.getElementById('clickablePlane').dispatchEvent(mouseUpEvent); // Trigger mouseup event if mouse leaves clickablePlane area while still clicked down
  }
  isMouseDown = false; // Reset mouse state to false on mouse leave
});

</script>

      
      <script>
      AFRAME.registerComponent('look-at-camera', {
  tick: function () {
    // Get the camera position
    var camera = document.querySelector('a-camera');
    var cameraPosition = camera.getAttribute('position');

    // Get the current position and rotation of the entity
    var entityPosition = this.el.getAttribute('position');
    var entityRotation = this.el.getAttribute('rotation');

    // Calculate the rotation that the entity should have to face the camera
    var targetRotation = Math.atan2(cameraPosition.x - entityPosition.x, cameraPosition.z - entityPosition.z) * 180 / Math.PI;

    // Set the rotation of the entity to face the camera
    this.el.setAttribute('rotation', { x: entityRotation.x, y: targetRotation, z: entityRotation.z });
  }
});
      
      </script>
      
      
      
    </a-scene>
  </body>
</html>

